{"version":3,"sources":["index.js"],"names":["dotenv","config","bot","Telegraf","process","env","BOT_TOKEN","wit","TelegrafWit","WIT_TOKEN","forecast","ForecastService","telegram","getMe","then","botInfo","options","username","on","ctx","console","log","meaning","message","text","res","userName","from","entities","reply","getCurrentData","startPolling"],"mappings":";;;;AAAA;;AACA;;AACA;;AAGA;;AADA;AAGA;AACAA,mBAAOC,MAAP,G,CAEA;;;AAEA,IAAMC,GAAG,GAAG,IAAIC,oBAAJ,CAAaC,OAAO,CAACC,GAAR,CAAYC,SAAzB,CAAZ;AACA,IAAMC,GAAG,GAAG,IAAIC,uBAAJ,CAAgBJ,OAAO,CAACC,GAAR,CAAYI,SAA5B,CAAZ;AACA,IAAMC,QAAQ,GAAG,IAAIC,oBAAJ,EAAjB;AAEAT,GAAG,CAACU,QAAJ,CAAaC,KAAb,GAAqBC,IAArB,CAA0B,UAACC,OAAD,EAAa;AACrCb,EAAAA,GAAG,CAACc,OAAJ,CAAYC,QAAZ,GAAuBF,OAAO,CAACE,QAA/B;AACD,CAFD;AAIAf,GAAG,CAACgB,EAAJ,CAAO,MAAP,EAAe,UAACC,GAAD,EAAS;AACtBC,EAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,SAAOd,GAAG,CAACe,OAAJ,CAAYH,GAAG,CAACI,OAAJ,CAAYC,IAAxB,EACJV,IADI,CACC,UAACW,GAAD,EAAS;AACb,QAAMC,QAAQ,GAAGP,GAAG,CAACI,OAAJ,CAAYI,IAAZ,CAAiBV,QAAlC;AACA,QAAI,WAAWQ,GAAG,CAACG,QAAnB,EAA6B,OAAOT,GAAG,CAACU,KAAJ,mEAAwBH,QAAxB,EAAP;;AAC7B,QAAI,iBAAiBD,GAAG,CAACG,QAAzB,EAAmC;AACjCR,MAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAACoB,cAAT,EAAZ;AACA,aAAOX,GAAG,CAACU,KAAJ,YAAcH,QAAd,mIAAP;AACD,KANY,CAOb;;;AACA,WAAO,KAAP;AACD,GAVI,CAAP;AAWD,CAbD;AAeAxB,GAAG,CAAC6B,YAAJ","sourcesContent":["import Telegraf from 'telegraf';\nimport dotenv from 'dotenv';\nimport TelegrafWit from 'telegraf-wit';\n\n// Services.\nimport ForecastService from './services/forecast.service';\n\n// Setup dotenv.\ndotenv.config();\n\n// console.log(new ForecastService().getCurrentData());\n\nconst bot = new Telegraf(process.env.BOT_TOKEN);\nconst wit = new TelegrafWit(process.env.WIT_TOKEN);\nconst forecast = new ForecastService();\n\nbot.telegram.getMe().then((botInfo) => {\n  bot.options.username = botInfo.username;\n});\n\nbot.on('text', (ctx) => {\n  console.log(2);\n  return wit.meaning(ctx.message.text)\n    .then((res) => {\n      const userName = ctx.message.from.username;\n      if ('hello' in res.entities) return ctx.reply(`Приветики @${userName}`);\n      if ('dayForecast' in res.entities) {\n        console.log(forecast.getCurrentData());\n        return ctx.reply(`@${userName}, сейчас посмотрю на небо`);\n      }\n      // return ctx.reply(JSON.stringify(ctx, null, 2));\n      return false;\n    });\n});\n\nbot.startPolling();\n"],"file":"index.js"}